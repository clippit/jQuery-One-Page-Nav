/*
 * jQuery One Page Nav Plugin
 * http://github.com/davist11/jQuery-One-Page-Nav
 *
 * Copyright (c) 2010 Trevor Davis (http://trevordavis.net)
 * Dual licensed under the MIT and GPL licenses.
 * Uses the same license as jQuery, see:
 * http://jquery.org/license
 *
 * @version 0.7
 */
(function(e){e.fn.onePageNav=function(i){var g=e.extend({},e.fn.onePageNav.defaults,i),d={sections:{}};d.bindNav=function(b,c,a){var f=b.parent(),g=b.attr("href"),h=e(window);f.hasClass(a.currentClass)||(a.begin&&a.begin(),d.adjustNav(c,f,a.currentClass),h.unbind(".onePageNav"),e.scrollTo(g,a.scrollSpeed,{easing:a.easing,offset:{top:-a.scrollOffset},onAfter:function(){a.changeHash&&(window.location.hash=g);h.bind("scroll.onePageNav",function(){d.scrollChange(c,a)});a.end&&a.end()}}))};d.adjustNav=
function(b,c,a){b=b.find("."+a);return b.find("a").attr("href")!=c.find("a").attr("href")?(b.removeClass(a),c.addClass(a),!0):!1};d.getPositions=function(b,c){b.find("a").each(function(){var a=e(this).attr("href"),b=e(a).offset().top;d.sections[a.substr(1)]=Math.round(b)-c.scrollOffset})};d.getSection=function(b){var c="",a=Math.round(e(window).height()/2),f;for(f in d.sections)d.sections[f]-a<b&&(c=f);return c};d.scrollChange=function(b,c){d.getPositions(b,c);var a=e(window).scrollTop(),a=d.getSection(a);
""!==a&&d.adjustNav(b,b.find("a[href=#"+a+"]").parent(),c.currentClass)&&c.end&&c.end();c.changeHash&&(window.location.hash=a)};d.init=function(b,c){var a=!1;b.find("a").bind("click",function(a){d.bindNav(e(this),b,c);a.preventDefault()});d.getPositions(b,c);e(window).bind("scroll.onePageNav",function(){a=!0});setInterval(function(){a&&(a=!1,d.scrollChange(b,c))},250)};return this.each(function(){var b=e(this),c=e.meta?e.extend({},g,b.data()):g;d.init(b,c)})};e.fn.onePageNav.defaults={currentClass:"current",
changeHash:!1,scrollSpeed:750,scrollOffset:0,easing:"easeInOutCirc",begin:!1,end:!1}})(jQuery);